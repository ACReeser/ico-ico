{"ts":1369666287587,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1369667067162,"patch":[[{"diffs":[[1,"(function( icoico, $, undefined ) {\r\n    //private properties\r\n    var ico = icoico;\r\n\r\n    //public properties\r\n    \r\n    //private methods\r\n    \r\n    //public classes\r\n    ico.stateTool = function(x, y, isPersistant){\r\n        this.visual = new icoVisual(x, y, \"\\u2699\");\r\n        var that = this;\r\n        this.visual.on('mouseover', function(){\r\n            if (!emotCursor.isState()){\r\n                emotCursor.makeState();\r\n            }\r\n            if (!isPersistant){\r\n                that.visual.destroy();\r\n                delete that;\r\n            }\r\n        });\r\n    };\r\n    ico.moveTool = function(x, y, isPersistant){\r\n        this.visual = new icoVisual(x, y, \"\\uf0b2\");\r\n        var that = this;\r\n        this.visual.on('mouseover', function(){\r\n            if (!emotCursor.isMove()){\r\n                emotCursor.makeMove();\r\n            }\r\n            if (!isPersistant){\r\n                that.visual.destroy();\r\n                delete that;\r\n            }\r\n        });\r\n    };\r\n}( window.icoico = window.icoico || {}, jQuery ));"]],"start1":0,"start2":0,"length1":0,"length2":1049}]],"length":1049,"saved":false}
{"ts":1369667104468,"patch":[[{"diffs":[[0,"           if (!"],[-1,"emotC"],[1,"ico.c"],[0,"ursor.isState())"]],"start1":351,"start2":351,"length1":37,"length2":37},{"diffs":[[0,"                "],[-1,"emotC"],[1,"ico.c"],[0,"ursor.makeState("]],"start1":391,"start2":391,"length1":37,"length2":37},{"diffs":[[0,"visual = new ico"],[-1,"V"],[1,".v"],[0,"isual(x, y, \"\\uf"]],"start1":649,"start2":649,"length1":33,"length2":34},{"diffs":[[0,"   if (!"],[-1,"emotC"],[1,"ico.c"],[0,"ursor.is"]],"start1":775,"start2":775,"length1":21,"length2":21},{"diffs":[[0,"    "],[-1,"emotC"],[1,"ico.c"],[0,"urso"]],"start1":818,"start2":818,"length1":13,"length2":13}]],"length":1050,"saved":false}
{"ts":1369667230789,"patch":[[{"diffs":[[0,"ic classes\r\n"],[1,"    ico.cursorClass = function(){\r\n        this.state = -1;\r\n        this.visual = new Kinetic.Text({\r\n        x: stage.getWidth() / 2,\r\n        y: 15,\r\n        fontFamily: 'fontello',\r\n        text: '',\r\n        fontSize: 18,\r\n        fill: 'black',\r\n        name:'cursor',          \r\n      });\r\n    };\r\n    ico.cursorClass.prototype.isState = function(){return this.state === 0;};\r\n    ico.cursorClass.prototype.isAction = function(){return this.state == 1;};\r\n    ico.cursorClass.prototype.isMove = function(){return this.state == 2;};\r\n    ico.cursorClass.prototype.makeState = function(){\r\n        this.state = 0;\r\n        this.visual.setText(\"\\u2699\");\r\n    };\r\n    ico.cursorClass.prototype.makeAction = function(){\r\n        this.state = 1;\r\n        this.visual.setText(\"\\u26a1\");\r\n    };\r\n    ico.cursorClass.prototype.makeMove = function(){\r\n        this.state = 2;\r\n        this.visual.setText(\"\\uf0b2\");\r\n    };\r\n    ico.cursorClass.prototype.highlight = function(){\r\n      switch(this.state){\r\n          case 0:\r\n              this.visual.setFill(\"#504c75\");\r\n              break;\r\n          case 1:\r\n              this.visual.setFill(\"orange\");\r\n              break;\r\n          case 2:\r\n              this.visual.setFill(\"#40070b\");\r\n              break;\r\n      }  \r\n    };\r\n    ico.cursorClass.prototype.unhighlight = function(){\r\n        this.visual.setFill(\"black\");\r\n    };\r\n    ico.cursorClass.prototype.grabObject = function(obj){\r\n        this.moveObj = obj;\r\n        // this.moveOffsetX = this.visual.getX() - obj.visual.getX();\r\n        // this.moveOffsetY = this.visual.getY() - obj.visual.getY();\r\n    };\r\n"],[0,"    ico.stat"]],"start1":158,"start2":158,"length1":24,"length2":1654},{"diffs":[[0," ico"],[-1,"V"],[1,".v"],[0,"isua"]],"start1":1876,"start2":1876,"length1":9,"length2":10}]],"length":2681,"saved":false}
{"ts":1369667261621,"patch":[[{"diffs":[[0,"     x: "],[1,"ico."],[0,"stage.ge"]],"start1":276,"start2":276,"length1":16,"length2":20}]],"length":2685,"saved":false}
{"ts":1369667309960,"patch":[[{"diffs":[[0,"ic classes\r\n"],[1,"    ico.visual = function(x, y, string, fontSize){\r\n        return new Kinetic.Text({\r\n          x: x,\r\n          y: y,\r\n          fontFamily: 'fontello',\r\n          text:string,\r\n          fontSize: fontSize||30,\r\n          fill:'black',\r\n        });\r\n    };\r\n    ico.center = function(visual, xoffset, yoffset){\r\n        xoffset = xoffset || 0;\r\n        yoffset = yoffset || 0;\r\n        visual.setX((stage.getWidth()/2)-(visual.getWidth()/2)+xoffset);\r\n        visual.setY((stage.getHeight()/2)-(visual.getHeight()/2)+yoffset);\r\n    };\r\n"],[0,"    ico.curs"]],"start1":158,"start2":158,"length1":24,"length2":563}]],"length":3224,"saved":false}
{"ts":1369667321667,"patch":[[{"diffs":[[0,"l.setX(("],[1,"ico."],[0,"stage.ge"]],"start1":564,"start2":564,"length1":16,"length2":20},{"diffs":[[0,"l.setY(("],[1,"ico."],[0,"stage.ge"]],"start1":642,"start2":642,"length1":16,"length2":20}]],"length":3232,"saved":false}
{"ts":1369668177127,"patch":[[{"diffs":[[0,"fset);\r\n    };\r\n"],[1,"    \r\n    ico.iconCircleCollision = function(c1, c2) {\r\n          var dx = c1.getX() - c2.getX();\r\n          var dy = c1.getY() - c2.getY();\r\n          var c1Min = (c1.getWidth() < c1.getHeight()) ? c1.getWidth() : c1.getHeight();\r\n          var c2Min = (c2.getWidth() < c2.getHeight()) ? c2.getWidth() : c2.getHeight();\r\n          var radiiSum = c1Min/2 + c2Min;\r\n          console.log(dx + \"/\" + dy + \": \" + radiiSum);\r\n          return ((dx * dx + dy * dy) < radiiSum * radiiSum);\r\n      };\r\n      \r\n    ico.checkClearState = function(){\r\n        for(var i = 0; i < ico.winObjs.length; i++){\r\n            if (ico.winObjs[i].state){\r\n                if (ico.winObjs[i].state != ico.winObjs[i].winState){\r\n                    return false;\r\n                }\r\n            } else if (ico.winObjs[i].checkWinCondition) {\r\n                if (!ico.winObjs[i].checkWinCondition()){\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        ico.levelStar.award();\r\n        return true;\r\n    };\r\n    \r\n"],[0,"    ico.cursorCl"]],"start1":701,"start2":701,"length1":32,"length2":1060}]],"length":4260,"saved":false}
{"ts":1369668200401,"patch":[[{"diffs":[[0,"  //"],[-1,"public classe"],[1,"icoico util"],[0,"s\r\n "]],"start1":150,"start2":150,"length1":21,"length2":19},{"diffs":[[0,"\r\n    };\r\n    \r\n"],[1,"    \r\n    //icoico common classes\r\n"],[0,"    ico.cursorCl"]],"start1":1727,"start2":1727,"length1":32,"length2":67}]],"length":4293,"saved":false}
{"ts":1369668304114,"patch":[[{"diffs":[[0," true;\r\n    };\r\n"],[1,"    ico.initIcoObj = function(icoObj){\r\n        ico.layer.add(icoObj.visual);\r\n        ico.winObjs.push(icoObj);\r\n    };\r\n    var initIcoProp = function(icoObj){\r\n        ico.layer.add(icoObj.visual);\r\n        ico.props.push(icoObj);\r\n    };\r\n    var clearStage = function(){\r\n        ico.levelStar.visual.on('mouseover', function(){});\r\n        TweenLite.to(ico.levelStar.visual, 0.5, {\r\n        setOpacity: 0,\r\n        onUpdate: function() {\r\n          ico.layer.draw(); \r\n        }        \r\n        });\r\n        ico.winObjs.forEach(function(obj){obj.visual.destroy(); delete obj;});\r\n        ico.winObjs.forEach(function(undef, i){ico.winObjs.splice(i, 1)});\r\n        ico.props.forEach(function(obj){obj.visual.destroy(); delete obj;});\r\n        ico.props.forEach(function(undef, i){ico.winObjs.splice(i, 1)});\r\n    };\r\n    var nextStage = function(){\r\n        ico.currentLevel++;\r\n        ico.levelCreators[ico.currentLevel](ico.stage, ico.layer);\r\n    };\r\n"],[0,"    \r\n    \r\n    "]],"start1":1721,"start2":1721,"length1":32,"length2":993}]],"length":5254,"saved":false}
{"ts":1369669082316,"patch":[[{"diffs":[[0,"    };\r\n"],[1,"    ico.emot = new Kinetic.Text({\r\n        x: ico.stage.getWidth() / 2 +15,\r\n        y: 30,\r\n        fontFamily: 'fontello',\r\n        text: '\\uE800',\r\n        fontSize: 18,\r\n        fill: 'black',\r\n        name:'emot',\r\n    });\r\n    \r\n    ico.emot.oncollide = function(collider){\r\n      console.log(collider.name)\r\n    };\r\n    ico.cursor = new ico.cursorClass();\r\n    \r\n    ico.moveEmot = function(mouseoverEvt){\r\n        ico.cursor.visual.setX(mouseoverEvt.offsetX);\r\n        ico.cursor.visual.setY(mouseoverEvt.offsetY);\r\n        ico.emot.setX( mouseoverEvt.offsetX+15);\r\n        ico.emot.setY( mouseoverEvt.offsetY+15);\r\n        if (ico.cursor.moveObj){\r\n        //   emotCursor.moveObj.moveTo(mouseoverEvt.offsetX+emotCursor.moveOffsetX, mouseoverEvt.offsetY+emotCursor.moveOffsetY);\r\n        }\r\n        ico.emot.getStage().draw();          \r\n    };\r\n    $('#icoCanvas').mouseover(ico.moveEmot);\r\n    \r\n    $('#icoCanvas').mousemove(ico.moveEmot);\r\n    \r\n    \r\n"],[0,"}( windo"]],"start1":5196,"start2":5196,"length1":16,"length2":981}]],"length":6219,"saved":false}
{"ts":1369670084933,"patch":[[{"diffs":[[0,"   });\r\n    };\r\n"],[1,"    ico.star = function(x, y){\r\n        ico.visual = new ico.visual(x, y, \"\\u2605\");\r\n        ico.visual.setFill('#f0b613');\r\n        ico.visual.setOpacity(0);\r\n        ico.visual.setStroke('black');\r\n    };\r\n    ico.star.prototype.award = function(){\r\n        TweenLite.to(this.visual, 1, {\r\n        setOpacity: 1,\r\n        onUpdate: function() {\r\n          ico.layer.draw(); \r\n        }        \r\n        });\r\n        this.visual.on('mouseover', function(){\r\n            clearStage();\r\n            nextStage();\r\n        });\r\n    };\r\n"],[0,"    ico.emot = n"]],"start1":5188,"start2":5188,"length1":32,"length2":566}]],"length":6753,"saved":false}
{"ts":1369670122554,"patch":[[{"diffs":[[0,"){\r\n        "],[-1,"ico"],[1,"this"],[0,".visual = ne"]],"start1":5232,"start2":5232,"length1":27,"length2":28},{"diffs":[[0,"605\");\r\n        "],[-1,"ico"],[1,"this"],[0,".visual.setFill("]],"start1":5283,"start2":5283,"length1":35,"length2":36},{"diffs":[[0,"613');\r\n        "],[-1,"ico"],[1,"this"],[0,".visual.setOpaci"]],"start1":5324,"start2":5324,"length1":35,"length2":36},{"diffs":[[0,");\r\n        "],[-1,"ico"],[1,"this"],[0,".visual.setS"]],"start1":5364,"start2":5364,"length1":27,"length2":28},{"diffs":[[0,", 1, {\r\n        "],[1,"    "],[0,"setOpacity: 1,\r\n"]],"start1":5493,"start2":5493,"length1":32,"length2":36},{"diffs":[[0,"ty: 1,\r\n"],[1,"    "],[0,"        "]],"start1":5521,"start2":5521,"length1":16,"length2":20},{"diffs":[[0,"() {\r\n          "],[1,"    "],[0,"ico.layer.draw()"]],"start1":5559,"start2":5559,"length1":32,"length2":36},{"diffs":[[0,"layer.draw(); \r\n"],[1,"    "],[0,"        }       "]],"start1":5583,"start2":5583,"length1":32,"length2":36},{"diffs":[[0,"        "],[1,"ico."],[0,"clearSta"]],"start1":5688,"start2":5688,"length1":16,"length2":20},{"diffs":[[0,"        "],[1,"ico."],[0,"nextStag"]],"start1":5719,"start2":5719,"length1":16,"length2":20}]],"length":6781,"saved":false}
{"ts":1369670784758,"patch":[[{"diffs":[[0,"};\r\n    "],[-1,"var "],[1,"ico."],[0,"initIcoP"]],"start1":1855,"start2":1855,"length1":20,"length2":20},{"diffs":[[0,"};\r\n    "],[-1,"var "],[1,"ico."],[0,"clearSta"]],"start1":1976,"start2":1976,"length1":20,"length2":20},{"diffs":[[0,"};\r\n    "],[-1,"var "],[1,"ico."],[0,"nextStag"]],"start1":2556,"start2":2556,"length1":20,"length2":20}]],"length":6781,"saved":false}
